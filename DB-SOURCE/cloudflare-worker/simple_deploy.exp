#!/usr/bin/expect -f

# Simple expect script for workers.dev registration

set timeout 30
spawn wrangler deploy

expect {
    "Would you like to register a workers.dev subdomain now?" {
        send "yes\r"
        expect "What would you like your workers.dev subdomain to be?" {
            send "ra8ga-archiwum\r"
            expect "Ok to proceed?" {
                send "Y\r"
                expect {
                    "Successfully deployed" {
                        puts "\n‚úÖ SUCCESS: Worker deployed!"
                        puts "üåê https://ra8ga-archiwum.workers.dev"
                    }
                    timeout {
                        puts "\n‚è∞ Timeout during deployment"
                    }
                }
            }
        }
    }
    timeout {
        puts "\n‚è∞ Timeout: Registration process"
    }
}